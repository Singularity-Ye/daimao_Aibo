<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <title>å‘†çŒ«é…å¯¹æ¸¸æˆ - ç¬¬äºŒå…³</title>
  <style>
    @font-face {
      font-family: 'KoseFont';
      src: url('fonts/Kosefont-JP.ttf') format('truetype');
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #8B0000, #FF0000);
      font-family: 'KoseFont', Arial, sans-serif;
      position: relative;
      overflow: hidden;
    }

    /* ç¦å­—è£…é¥° */
    .fu {
      position: fixed;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 80px;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      animation: fuFloat 3s ease-in-out infinite;
      z-index: 1;
    }

    .fu-left {
      top: 50px;
      left: 50px;
      transform: rotate(-15deg);
    }

    .fu-right {
      top: 50px;
      right: 50px;
      transform: rotate(15deg);
    }

    /* ç¯ç¬¼è£…é¥° */
    .lantern {
      position: fixed;
      width: 60px;
      height: 80px;
      background: url('images/lantern.png') no-repeat center/contain;
      animation: lanternSwing 3s ease-in-out infinite;
      z-index: 1;
    }

    .lantern-left {
      left: 100px;
      top: 20px;
    }

    .lantern-right {
      right: 100px;
      top: 20px;
    }

    /* æ˜¥è”è£…é¥° */
    .couplet {
      position: fixed;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 24px;
      writing-mode: vertical-lr;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      z-index: 1;
    }

    .couplet-left {
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    .couplet-right {
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    /* åŠ¨ç”»æ•ˆæœ */
    @keyframes fuFloat {

      0%,
      100% {
        transform: translateY(0) rotate(-15deg);
      }

      50% {
        transform: translateY(-10px) rotate(-15deg);
      }
    }

    @keyframes lanternSwing {

      0%,
      100% {
        transform: rotate(-5deg);
      }

      50% {
        transform: rotate(5deg);
      }
    }

    .level-title {
      color: #03e9f4;
      font-size: 36px;
      margin: 30px 0;
      text-align: center;
      font-family: 'KoseFont', Arial, sans-serif;
      text-shadow:
        0 0 5px #03e9f4,
        0 0 25px #03e9f4,
        0 0 50px #03e9f4,
        0 0 100px #03e9f4;
      animation: neonGlow 1.5s ease-in-out infinite alternate;
      position: relative;
      z-index: 2;
    }

    @keyframes neonGlow {
      from {
        text-shadow:
          0 0 5px #03e9f4,
          0 0 25px #03e9f4,
          0 0 50px #03e9f4,
          0 0 100px #03e9f4;
      }

      to {
        text-shadow:
          0 0 2.5px #03e9f4,
          0 0 12.5px #03e9f4,
          0 0 25px #03e9f4,
          0 0 50px #03e9f4;
      }
    }

    .game-container {
      width: 800px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      padding: 20px;
      margin-bottom: 80px;
      /* ç¡®ä¿ä¸é®æŒ¡æŒ‰é’® */
    }

    .card {
      aspect-ratio: 1;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      width: 100%;
      height: 100%;
      position: absolute;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .card-front {
      background: #fff;
      transform: rotateY(180deg);
    }

    .card-front img {
      width: 80%;
      height: 80%;
      object-fit: contain;
    }

    .card-back {
      background: url('images/fanpaibeijing.png') no-repeat center center;
      background-size: cover;
    }

    /* ä¸‹ä¸€å…³æŒ‰é’®æ ·å¼ */
    .next-level {
      display: none;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      position: fixed;
      bottom: 30px;
      /* ä¸‹é¢çš„æŒ‰é’® */
      right: 30px;
      font-size: 20px;
      font-family: 'KoseFont', Arial, sans-serif;
      text-decoration: none;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      transition: all 0.3s ease;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      animation:
        buttonGlow 1.5s ease-in-out infinite alternate,
        gradientMove 3s ease infinite;
      overflow: hidden;
      z-index: 99;
    }

    /* å››è§’è£…é¥° */
    .next-level::before,
    .next-level::after,
    .next-level>span::before,
    .next-level>span::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      border-color: #FFD700;
      border-style: solid;
      pointer-events: none;
      animation: borderGlow 1.5s ease-in-out infinite alternate;
    }

    /* å·¦ä¸Šè§’ */
    .next-level::before {
      top: 0;
      left: 0;
      border-width: 3px 0 0 3px;
      border-radius: 10px 0 0 0;
    }

    /* å³ä¸Šè§’ */
    .next-level::after {
      top: 0;
      right: 0;
      border-width: 3px 3px 0 0;
      border-radius: 0 10px 0 0;
    }

    /* å·¦ä¸‹è§’ */
    .next-level>span::before {
      bottom: 0;
      left: 0;
      border-width: 0 0 3px 3px;
      border-radius: 0 0 0 10px;
    }

    /* å³ä¸‹è§’ */
    .next-level>span::after {
      bottom: 0;
      right: 0;
      border-width: 0 3px 3px 0;
      border-radius: 0 0 10px 0;
    }

    .show-reward-btn {
      display: none;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      position: fixed;
      bottom: 100px;
      /* ä¸Šé¢çš„æŒ‰é’® */
      right: 30px;
      font-size: 20px;
      font-family: 'KoseFont', Arial, sans-serif;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      animation:
        buttonGlow 1.5s ease-in-out infinite alternate,
        gradientMove 3s ease infinite;
      overflow: hidden;
    }

    .show-reward-btn::before,
    .show-reward-btn::after,
    .show-reward-btn>span::before,
    .show-reward-btn>span::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      border-color: #FFD700;
      border-style: solid;
      pointer-events: none;
      animation: borderGlow 1.5s ease-in-out infinite alternate;
    }

    /* å·¦ä¸Šè§’ */
    .show-reward-btn::before {
      top: 0;
      left: 0;
      border-width: 3px 0 0 3px;
      border-radius: 10px 0 0 0;
    }

    /* å³ä¸Šè§’ */
    .show-reward-btn::after {
      top: 0;
      right: 0;
      border-width: 3px 3px 0 0;
      border-radius: 0 10px 0 0;
    }

    /* å·¦ä¸‹è§’ */
    .show-reward-btn>span::before {
      bottom: 0;
      left: 0;
      border-width: 0 0 3px 3px;
      border-radius: 0 0 0 10px;
    }

    /* å³ä¸‹è§’ */
    .show-reward-btn>span::after {
      bottom: 0;
      right: 0;
      border-width: 0 3px 3px 0;
      border-radius: 0 0 10px 0;
    }

    @keyframes borderGlow {
      from {
        border-color: #FFD700;
        box-shadow: 0 0 5px #FFD700;
      }

      to {
        border-color: #FFA500;
        box-shadow: 0 0 15px #FFA500;
      }
    }

    @keyframes buttonGlow {
      from {
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      }

      to {
        box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
      }
    }

    @keyframes gradientMove {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* è§†é¢‘å¥–åŠ±ç›¸å…³æ ·å¼ */
    .reward-video-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      /* ç¨å¾®è°ƒæš—æ•´ä½“èƒŒæ™¯ï¼Œè®©è§†é¢‘æ›´çªå‡º */
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .reward-video-wrapper {
      position: relative;
      width: 95%;
      /* å¢åŠ å®½åº¦ */
      max-width: 1600px;
      /* å¢åŠ æœ€å¤§å®½åº¦ */
      height: 90vh;
      /* å¢åŠ é«˜åº¦ */
      background: transparent;
      border-radius: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
    }

    .video-player-container {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .reward-video {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
    }

    .close-video {
      position: absolute;
      top: -240px;
      /* è°ƒæ•´ä¸Šä¸‹ä½ç½®ï¼Œæ•°å€¼è¶Šå¤§è¶Šå¾€ä¸‹ */
      right: 20px;
      /* è°ƒæ•´å·¦å³ä½ç½®ï¼Œæ•°å€¼è¶Šå¤§è¶Šå¾€å·¦ */
      width: 30px;
      height: 30px;
      background: #FFD700;
      border: none;
      border-radius: 50%;
      color: #FF0000;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'KoseFont', Arial, sans-serif;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      transition: all 0.3s ease;
      z-index: 1001;
    }

    .close-video:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    }

    /* æœç´¢æ æ ·å¼ */
    .cheat-code-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
    }

    .cheat-code-input {
      width: 200px;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: none;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 16px;
      outline: none;
      border-radius: 0;
      position: relative;
      transition: all 0.3s ease;
    }

    .cheat-code-wrapper {
      position: relative;
      display: inline-block;
    }

    .cheat-success {
      position: fixed;
      top: 70px;
      right: 20px;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.3s ease;
      text-shadow: 0 0 5px #FFD700;
    }

    .cheat-success.show {
      opacity: 1;
    }

    /* æ·»åŠ æ–°çš„è§†é¢‘æ’­æ”¾å™¨ç›¸å…³æ ·å¼ */
    .video-player-container {
      position: relative;
      width: 100%;
      height: 100%;
    }

    /* è‡ªå®šä¹‰æ§åˆ¶æ  */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(139, 0, 0, 0.7);
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      border-radius: 0 0 8px 8px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .video-player-container:hover .custom-controls {
      opacity: 1;
    }

    /* æ’­æ”¾/æš‚åœæŒ‰é’® */
    .play-pause-btn {
      background: #FFD700;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    /* æ”¹è¿›è¿›åº¦æ¡æ ·å¼ */
    .progress-container {
      flex: 1;
      height: 8px;
      background: rgba(255, 215, 0, 0.2);
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      transition: height 0.2s ease;
    }

    .progress-container:hover {
      height: 12px;
      /* æ‚¬æµ®æ—¶å¢åŠ é«˜åº¦ */
    }

    .progress-bar {
      height: 100%;
      background: #FFD700;
      border-radius: 4px;
      width: 0%;
      position: relative;
      transition: width 0.1s linear;
    }

    /* æ·»åŠ è¿›åº¦æ¡æ‹–åŠ¨æ—¶çš„è§†è§‰åé¦ˆ */
    .progress-container.dragging {
      height: 12px;
    }

    .progress-container.dragging .progress-bar {
      background: #FFA500;
    }

    .progress-handle {
      position: absolute;
      right: -30px;
      top: -65px;
      width: 80px;
      height: 80px;
      background-image: url('images/daimao1.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      pointer-events: none;
      transition: all 0.1s linear;
      animation: daimaoFloat 2s ease-in-out infinite;
      transform-origin: bottom center;
    }

    /* æ·»åŠ å‘†çŒ«æµ®åŠ¨åŠ¨ç”» */
    @keyframes daimaoFloat {
      0% {
        transform: translateY(0) rotate(-5deg);
      }

      25% {
        transform: translateY(-15px) rotate(0deg);
      }

      50% {
        transform: translateY(0) rotate(5deg);
      }

      75% {
        transform: translateY(-15px) rotate(0deg);
      }

      100% {
        transform: translateY(0) rotate(-5deg);
      }
    }

    /* æ—¶é—´æ˜¾ç¤º */
    .time-display {
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 14px;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
      min-width: 100px;
      text-align: center;
    }

    /* æ§åˆ¶æŒ‰é’®æ ·å¼ */
    .control-btn {
      background: #FFD700;
      border: none;
      border-radius: 4px;
      padding: 5px 10px;
      color: #8B0000;
      cursor: pointer;
      font-size: 14px;
      font-family: 'KoseFont', Arial, sans-serif;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s ease;
    }

    /* ä¿®æ”¹å€é€Ÿèœå•æ ·å¼ */
    .speed-menu {
      position: absolute;
      bottom: 100%;
      background: rgba(139, 0, 0, 0.9);
      border-radius: 4px;
      padding: 5px;
      display: none;
    }

    .speed-option {
      padding: 5px 10px;
      color: #FFD700;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .speed-option:hover {
      background: rgba(255, 215, 0, 0.2);
    }

    /* Tooltip æ ·å¼ */
    .tooltip {
      position: relative;
    }

    .tooltip::after {
      content: attr(data-tooltip) " - " attr(data-status);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 5px 10px;
      background: rgba(139, 0, 0, 0.9);
      color: #FFD700;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s;
      margin-bottom: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      z-index: 1002;
    }

    .tooltip:hover::after {
      visibility: visible;
      opacity: 1;
    }

    /* æ·»åŠ  .show ç±»çš„æ ·å¼ */
    .speed-menu.show {
      display: block;
    }

    /* è™«æ£å‘†çŒ«åŠ¨ç”» */
    @keyframes floatAndRotate {
      0% {
        transform: translateY(0) rotate(0deg);
      }

      25% {
        transform: translateY(-10px) rotate(5deg);
      }

      50% {
        transform: translateY(0) rotate(0deg);
      }

      75% {
        transform: translateY(10px) rotate(-5deg);
      }

      100% {
        transform: translateY(0) rotate(0deg);
      }
    }

    .chonggundaimao {
      position: absolute;
      top: 40px;
      right: 10px;
      width: 300px;
      height: auto;
      z-index: 1001;
      animation: floatAndRotate 3s ease-in-out infinite;
      transform-origin: center center;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .chonggundaimao:hover {
      transform: scale(1.1) rotate(10deg);
    }

    /* è§†é¢‘åˆ‡æ¢æŒ‰é’®æ ·å¼ */
    a.aki-btn {
      position: absolute;
      top: 380px;
      right: 10px;
      transform: translateY(-50%);
      width: 300px;
      height: 90px;
      background: linear-gradient(90deg, #8B0000, #FFD700);
      border-radius: 8px;
      font-size: 16px;
      color: #ffffff;
      overflow: hidden;
      z-index: 1002;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    a.aki-btn span.icon,
    a.aki-btn span.txt {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      color: #FFD700;
      transition: all 0.5s ease;
      z-index: 2;
      backface-visibility: hidden;
    }

    a.aki-btn span.icon {
      transform: rotateY(-180deg);
    }

    a.aki-btn span.txt {
      transform: rotateY(0deg);
      font-size: 20px;
      padding: 0 10px;
    }

    a.aki-btn:hover span.txt {
      transform: rotateY(-180deg);
    }

    a.aki-btn:hover span.icon {
      transform: rotateY(0deg);
    }

    a.aki-btn span.icon svg {
      width: 40px;
      fill: #FFD700;
    }

    /* æ·»åŠ å¿«è¿›å¿«é€€çš„è§†è§‰åé¦ˆæ ·å¼ */
    .skip-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 215, 0, 0.8);
      color: #8B0000;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 20px;
      font-family: 'KoseFont', Arial, sans-serif;
      animation: fadeOut 0.5s ease-out;
      pointer-events: none;
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
      }
    }

    /* å¾ªç¯æ’­æ”¾æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
    #loopBtn.control-btn.active {
      background-color: #FF0000 !important;
      /* é²œè‰³çš„çº¢è‰² */
      color: #FFD700 !important;
      /* é‡‘è‰²æ–‡å­— */
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
      /* çº¢è‰²é˜´å½± */
    }

    /* ä½¿ç”¨ç›¸åŒçš„è¿”å›æŒ‰é’®æ ·å¼ */
    .back-btn {
      position: fixed;
      left: 20px;
      bottom: 20px;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'KoseFont', Arial, sans-serif;
      text-decoration: none;
      animation: gradientMove 3s linear infinite;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      z-index: 1000;
    }

    .back-btn:hover {
      animation: buttonGlow 1s ease-in-out infinite alternate;
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <!-- æ·»åŠ æ˜¥èŠ‚è£…é¥°å…ƒç´  -->
  <div class="fu fu-left">ç¦</div>
  <div class="fu fu-right">ç¦</div>
  <div class="lantern lantern-left"></div>
  <div class="lantern lantern-right"></div>
  <div class="couplet couplet-left">æ–°æ˜¥å¿«ä¹å‘†çŒ«é™ª</div>
  <div class="couplet couplet-right">ç‘é›ªä¸°å¹´ç¦æ°”æ¥</div>

  <!-- ä¿®æ”¹ä½œå¼Šç è¾“å…¥æ¡†ç»“æ„ -->
  <div class="cheat-code-container">
    <div class="cheat-code-wrapper">
      <span></span>
      <input type="text" class="cheat-code-input" id="cheatCodeInput" placeholder="ä½œå¼Šç ï¼štiaoguo2
      ">
    </div>
    <div class="cheat-success" id="cheatSuccess">å¯†ä»¤ç”Ÿæ•ˆï¼</div>
  </div>

  <h1 class="level-title">ç¬¬äºŒå…³ - å‘†çŒ«ç¿»è½¬è¿›é˜¶</h1>
  <div class="game-container" id="gameContainer"></div>
  <!-- ä¸‹ä¸€å…³æŒ‰é’® -->
  <a href="fanpai-level3.html" class="next-level" id="nextLevel">
    <span></span>
    ä¸‹ä¸€å…³
  </a>

  <!-- æ˜¾ç¤ºå¥–åŠ±æŒ‰é’® -->
  <button class="show-reward-btn" id="showRewardBtn">
    <span></span>
    æ¥è‡ªå‘†çŒ«çš„å¥–åŠ±å°è§†é¢‘
  </button>

  <!-- ä¿®æ”¹è§†é¢‘æ’­æ”¾å™¨ç»“æ„ -->
  <div class="reward-video-container" id="rewardVideoContainer">
    <div class="reward-video-wrapper">
      <div class="video-player-container">
        <video class="reward-video" id="rewardVideo">
          <source src="videos/fanzhuanjiangli2-1.mp4" type="video/mp4" id="videoSource">
          ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
        </video>
        <a href="javascript:;" class="aki-btn" id="switchVideoBtn">
          <span class="txt">å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äºŒä¸ªå¥–åŠ±è§†é¢‘å–µ</span>
          <span class="icon">
            <svg t="1691995071208" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="2968" width="200" height="200">
              <path
                d="M729.6 448H128v85.333333h601.6L597.333333 665.6l59.733334 59.733333 234.666666-234.666666L661.333333 256l-59.733333 59.733333 128 132.266667z"
                p-id="2969"></path>
            </svg>
          </span>
        </a>
        <div class="custom-controls">
          <button class="play-pause-btn tooltip" id="playPauseBtn" data-tooltip="æ’­æ”¾/æš‚åœ">â¸</button>
          <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar">
              <div class="progress-handle"></div>
            </div>
          </div>
          <div class="time-display">
            <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
          </div>
          <div class="speed-control" style="position: relative;">
            <button class="control-btn tooltip" id="speedBtn" data-tooltip="æ’­æ”¾é€Ÿåº¦" data-status="1.0x">1.0x</button>
            <div class="speed-menu" id="speedMenu">
              <div class="speed-option" data-speed="0.5">0.5x</div>
              <div class="speed-option" data-speed="1.0">1.0x</div>
              <div class="speed-option" data-speed="1.5">1.5x</div>
              <div class="speed-option" data-speed="2.0">2.0x</div>
            </div>
          </div>
          <button class="control-btn tooltip" id="loopBtn" data-tooltip="å¾ªç¯æ’­æ”¾" data-status="å¾ªç¯æ’­æ”¾å·²å¯ç”¨">ğŸ”</button>
          <button class="control-btn tooltip" id="downloadBtn" data-tooltip="ä¸‹è½½è§†é¢‘">ğŸ’¾</button>
          <div class="volume-container">
            <button class="volume-btn tooltip" id="volumeBtn" data-tooltip="é™éŸ³/å–æ¶ˆé™éŸ³" data-status="">ğŸ”Š</button>
            <input type="range" class="volume-slider tooltip" id="volumeSlider" min="0" max="1" step="0.1" value="1"
              data-tooltip="éŸ³é‡è°ƒèŠ‚" data-status="100%">
          </div>
        </div>
        <img src="images/chonggundaimao2.png" alt="è™«æ£å‘†çŒ«" class="chonggundaimao">
      </div>
      <button class="close-video tooltip" id="closeVideo" data-tooltip="å…³é—­è§†é¢‘">Ã—</button>
    </div>
  </div>

  <!-- æ·»åŠ è¿”å›æŒ‰é’® -->
  <a href="fanpai-level1.html" class="back-btn">è¿”å›ä¸Šä¸€å…³</a>

  <script>
    // ç¬¬äºŒå…³ä½¿ç”¨çš„å›¾ç‰‡ï¼ˆ6å¼ ï¼Œæ¯å¼ å‡ºç°ä¸¤æ¬¡ï¼‰
    const images = [
      'images/chonggundaimao.png',
      'images/taidaodaimao.png',
      'images/dajiandaimao.png',
      'images/shuangdaodaimao.png',
      'images/dunfudaimao.png',
      'images/zhongnudaimao.png'
    ];

    let cards = [...images, ...images]; // å¤åˆ¶ä¸€ä»½ï¼Œå½¢æˆå¯¹å­
    let flippedCards = [];
    let matchedPairs = 0;

    // æ´—ç‰Œå‡½æ•°
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // åˆ›å»ºå¡ç‰‡
    function createCards() {
      const gameContainer = document.getElementById('gameContainer');
      shuffle(cards).forEach((image, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.image = image;

        const front = document.createElement('div');
        front.className = 'card-front';
        const img = document.createElement('img');
        img.src = image;
        front.appendChild(img);

        const back = document.createElement('div');
        back.className = 'card-back';

        card.appendChild(front);
        card.appendChild(back);

        card.addEventListener('click', flipCard);
        gameContainer.appendChild(card);
      });
    }

    // ç¿»ç‰Œå‡½æ•°
    function flipCard() {
      if (flippedCards.length === 2) return;
      if (this.classList.contains('flipped')) return;

      this.classList.add('flipped');
      flippedCards.push(this);

      if (flippedCards.length === 2) {
        checkMatch();
      }
    }

    // æ£€æŸ¥é…å¯¹
    function checkMatch() {
      const [card1, card2] = flippedCards;
      const match = card1.dataset.image === card2.dataset.image;

      if (match) {
        matchedPairs++;
        flippedCards = [];

        // æ£€æŸ¥æ˜¯å¦å®Œæˆæœ¬å…³
        if (matchedPairs === images.length) {
          setTimeout(() => {
            document.getElementById('nextLevel').style.display = 'block';
            showRewardVideo(); // é€šå…³åæ˜¾ç¤ºå¹¶è‡ªåŠ¨æ’­æ”¾å¥–åŠ±è§†é¢‘
          }, 500);
        }
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          flippedCards = [];
        }, 1000);
      }
    }

    // è§†é¢‘ç›¸å…³åŠŸèƒ½
    const videoContainer = document.getElementById('rewardVideoContainer');
    const video = document.getElementById('rewardVideo');
    const closeBtn = document.getElementById('closeVideo');
    const showRewardBtn = document.getElementById('showRewardBtn');

    function showRewardVideo() {
      const rewardVideoContainer = document.getElementById('rewardVideoContainer');
      const backBtn = document.querySelector('.back-btn'); // è·å–è¿”å›æŒ‰é’®

      rewardVideoContainer.style.display = 'flex';
      backBtn.style.display = 'none'; // éšè—è¿”å›æŒ‰é’®

      // æ’­æ”¾è§†é¢‘
      video.play().catch(error => {
        console.log("è§†é¢‘è‡ªåŠ¨æ’­æ”¾å¤±è´¥:", error);
      });
    }

    closeBtn.addEventListener('click', () => {
      const rewardVideoContainer = document.getElementById('rewardVideoContainer');
      const backBtn = document.querySelector('.back-btn'); // è·å–è¿”å›æŒ‰é’®

      rewardVideoContainer.style.display = 'none';
      backBtn.style.display = 'block'; // æ˜¾ç¤ºè¿”å›æŒ‰é’®

      // æš‚åœè§†é¢‘
      video.pause();
    });

    showRewardBtn.addEventListener('click', () => {
      videoContainer.style.display = 'flex';
      // ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æŒ‰é’®
    });

    // ä¿®æ”¹ä½œå¼Šç éªŒè¯é€»è¾‘
    const cheatCodeInput = document.getElementById('cheatCodeInput');
    const cheatSuccess = document.getElementById('cheatSuccess');
    const validCheatCodes = {
      'tiaoguo1': 1,
      'tiaoguo2': 2,
      'tiaoguo3': 3,
      'tiaoguo4': 4
    };

    cheatCodeInput.addEventListener('input', function () {
      const code = this.value.trim().toLowerCase();
      if (validCheatCodes[code]) {
        if (validCheatCodes[code] === 2) {
          matchedPairs = images.length;
          document.getElementById('nextLevel').style.display = 'block';
          showRewardVideo();
          this.value = '';

          cheatSuccess.classList.add('show');
          setTimeout(() => {
            cheatSuccess.classList.remove('show');
          }, 2000);
        } else {
          this.value = '';
          cheatSuccess.textContent = 'æ­¤å¯†ä»¤ç”¨äºå…¶ä»–å…³å¡ï¼';
          cheatSuccess.classList.add('show');
          setTimeout(() => {
            cheatSuccess.classList.remove('show');
            cheatSuccess.textContent = 'å¯†ä»¤ç”Ÿæ•ˆï¼';
          }, 2000);
        }
      }
    });

    // è§†é¢‘æ’­æ”¾å™¨ç›¸å…³åŠŸèƒ½
    const playPauseBtn = document.getElementById('playPauseBtn');
    const progressBar = document.getElementById('progressBar');
    const progressContainer = document.getElementById('progressContainer');
    const currentTimeSpan = document.getElementById('currentTime');
    const durationSpan = document.getElementById('duration');
    const speedBtn = document.getElementById('speedBtn');
    const speedMenu = document.getElementById('speedMenu');
    const loopBtn = document.getElementById('loopBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const volumeBtn = document.getElementById('volumeBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const videoSource = document.getElementById('videoSource');

    let currentVideo = 1;  // è·Ÿè¸ªå½“å‰æ’­æ”¾çš„è§†é¢‘

    // ä¿®æ”¹æ’­æ”¾æŒ‰é’®åˆå§‹çŠ¶æ€
    playPauseBtn.textContent = 'â¸';  // æ”¹ä¸ºæš‚åœç¬¦å·

    // ä¿®æ”¹æ’­æ”¾/æš‚åœæŒ‰é’®ç‚¹å‡»äº‹ä»¶
    playPauseBtn.addEventListener('click', () => {
      if (video.paused) {
        video.play().then(() => {
          playPauseBtn.textContent = 'â¸';  // æ’­æ”¾æ—¶æ˜¾ç¤ºæš‚åœç¬¦å·
        });
      } else {
        video.pause();
        playPauseBtn.textContent = 'â–¶';    // æš‚åœæ—¶æ˜¾ç¤ºæ’­æ”¾ç¬¦å·
      }
    });

    // è§†é¢‘åŠ è½½å®Œæˆååªè®¾ç½®æ€»æ—¶é•¿å’Œå¾ªç¯ï¼Œä¸è‡ªåŠ¨æ’­æ”¾
    video.addEventListener('loadedmetadata', () => {
      durationSpan.textContent = formatTime(video.duration);
      video.loop = true;
      loopBtn.classList.add('active');
      playPauseBtn.textContent = 'â–¶';  // åˆå§‹æ˜¾ç¤ºæ’­æ”¾æŒ‰é’®
    });

    // è¿›åº¦æ¡æ›´æ–°
    video.addEventListener('timeupdate', () => {
      const progress = (video.currentTime / video.duration) * 100;
      progressBar.style.width = progress + '%';
      currentTimeSpan.textContent = formatTime(video.currentTime);
    });

    // æ ¼å¼åŒ–æ—¶é—´
    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      seconds = Math.floor(seconds % 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    // å€é€Ÿæ§åˆ¶
    speedBtn.addEventListener('click', () => {
      speedMenu.classList.toggle('show');
    });

    document.querySelectorAll('.speed-option').forEach(option => {
      option.addEventListener('click', () => {
        const speed = parseFloat(option.dataset.speed);
        video.playbackRate = speed;
        speedBtn.textContent = speed + 'x';
        speedBtn.setAttribute('data-status', `${speed}x`);
        speedMenu.classList.remove('show');
      });
    });

    // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­å€é€Ÿèœå•
    document.addEventListener('click', (e) => {
      if (!speedBtn.contains(e.target) && !speedMenu.contains(e.target)) {
        speedMenu.classList.remove('show');
      }
    });

    // å¾ªç¯æ’­æ”¾æ§åˆ¶
    loopBtn.addEventListener('click', () => {
      video.loop = !video.loop;
      loopBtn.classList.toggle('active');
      if (video.loop) {
        loopBtn.setAttribute('data-status', 'å¾ªç¯æ’­æ”¾å·²å¯ç”¨');
      } else {
        loopBtn.setAttribute('data-status', 'å¾ªç¯æ’­æ”¾å·²å…³é—­');
      }
    });

    // ä¸‹è½½è§†é¢‘
    downloadBtn.addEventListener('click', () => {
      const link = document.createElement('a');
      link.href = videoSource.src;
      link.download = 'fanzhuanjiangli2-' + currentVideo + '.mp4';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });

    // éŸ³é‡æ§åˆ¶
    volumeBtn.addEventListener('click', () => {
      if (video.volume > 0) {
        video.volume = 0;
        volumeBtn.textContent = 'ğŸ”‡';
        volumeSlider.value = 0;
        volumeBtn.setAttribute('data-status', 'å·²é™éŸ³');
      } else {
        video.volume = volumeSlider.value;
        volumeBtn.textContent = 'ğŸ”Š';
        volumeBtn.setAttribute('data-status', '');
      }
    });

    volumeSlider.addEventListener('input', () => {
      video.volume = volumeSlider.value;
      volumeBtn.textContent = volumeSlider.value > 0 ? 'ğŸ”Š' : 'ğŸ”‡';
      const percentage = Math.round(volumeSlider.value * 100);
      volumeSlider.setAttribute('data-status', `${percentage}%`);
    });

    // è§†é¢‘åˆ‡æ¢æŒ‰é’®
    const switchVideoBtn = document.getElementById('switchVideoBtn');
    const switchBtnText = switchVideoBtn.querySelector('.txt');

    switchVideoBtn.addEventListener('click', () => {
      const wasPlaying = !video.paused;
      // ä¿®æ”¹è§†é¢‘åˆ‡æ¢é€»è¾‘ï¼Œæ”¯æŒ5ä¸ªè§†é¢‘
      currentVideo = currentVideo % 5 + 1; // 1->2->3->4->5->1
      videoSource.src = `videos/fanzhuanjiangli2-${currentVideo}.mp4`;

      // æ›´æ–°æŒ‰é’®æ–‡æœ¬
      switch (currentVideo) {
        case 1:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äºŒä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 2:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬ä¸‰ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 3:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬å››ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 4:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äº”ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 5:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥è¿”å›è¯¥å…³å¡çš„ç¬¬ä¸€ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
      }

      video.load();
      video.addEventListener('loadedmetadata', function onLoaded() {
        if (wasPlaying) {
          video.play()
            .then(() => {
              playPauseBtn.textContent = 'â¸';
            })
            .catch(error => {
              console.log("è§†é¢‘æ’­æ”¾å¤±è´¥:", error);
            });
        }
        video.removeEventListener('loadedmetadata', onLoaded);
      });
    });

    // ç¡®ä¿åœ¨è§†é¢‘åŠ è½½åæ·»åŠ é”®ç›˜æ§åˆ¶
    document.addEventListener('keydown', (e) => {
      // åªæœ‰åœ¨è§†é¢‘å®¹å™¨æ˜¾ç¤ºæ—¶æ‰å“åº”é”®ç›˜æ§åˆ¶
      if (document.getElementById('rewardVideoContainer').style.display === 'flex') {
        const skipTime = 5; // å¿«è¿›/å¿«é€€çš„ç§’æ•°

        switch (e.key) {
          case 'ArrowRight':
            e.preventDefault(); // é˜²æ­¢é¡µé¢æ»šåŠ¨
            // å¿«è¿›5ç§’
            video.currentTime = Math.min(video.currentTime + skipTime, video.duration);
            break;
          case 'ArrowLeft':
            e.preventDefault(); // é˜²æ­¢é¡µé¢æ»šåŠ¨
            // å¿«é€€5ç§’
            video.currentTime = Math.max(video.currentTime - skipTime, 0);
            break;
          case ' ':
            e.preventDefault(); // é˜²æ­¢é¡µé¢æ»šåŠ¨
            if (video.paused) {
              video.play().then(() => {
                playPauseBtn.textContent = 'â¸';
              });
            } else {
              video.pause();
              playPauseBtn.textContent = 'â–¶';
            }
            break;
        }
      }
    });

    // æ·»åŠ è§†è§‰åé¦ˆ
    function showSkipIndicator(direction) {
      const indicator = document.createElement('div');
      indicator.className = 'skip-indicator';
      indicator.textContent = direction === 'right' ? '+5s' : '-5s';
      video.parentElement.appendChild(indicator);
      setTimeout(() => indicator.remove(), 500);
    }

    // åˆå§‹åŒ–æ¸¸æˆ
    createCards();
  </script>
</body>

</html>