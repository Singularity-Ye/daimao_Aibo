<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <title>å‘†çŒ«é…å¯¹æ¸¸æˆ - ç¬¬ä¸‰å…³</title>
  <style>
    @font-face {
      font-family: 'KoseFont';
      src: url('fonts/Kosefont-JP.ttf') format('truetype');
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #8B0000, #FF0000);
      font-family: 'KoseFont', Arial, sans-serif;
      position: relative;
      overflow: hidden;
    }

    /* ç¦å­—è£…é¥° */
    .fu {
      position: fixed;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 80px;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      animation: fuFloat 3s ease-in-out infinite;
      z-index: 1;
    }

    .fu-left {
      top: 50px;
      left: 50px;
      transform: rotate(-15deg);
    }

    .fu-right {
      top: 50px;
      right: 50px;
      transform: rotate(15deg);
    }

    /* ç¯ç¬¼è£…é¥° */
    .lantern {
      position: fixed;
      width: 60px;
      height: 80px;
      background: url('images/lantern.png') no-repeat center/contain;
      animation: lanternSwing 3s ease-in-out infinite;
      z-index: 1;
    }

    .lantern-left {
      left: 100px;
      top: 20px;
    }

    .lantern-right {
      right: 100px;
      top: 20px;
    }

    /* æ˜¥è”è£…é¥° */
    .couplet {
      position: fixed;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 24px;
      writing-mode: vertical-lr;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      z-index: 1;
    }

    .couplet-left {
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    .couplet-right {
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    /* åŠ¨ç”»æ•ˆæœ */
    @keyframes fuFloat {

      0%,
      100% {
        transform: translateY(0) rotate(-15deg);
      }

      50% {
        transform: translateY(-10px) rotate(-15deg);
      }
    }

    @keyframes lanternSwing {

      0%,
      100% {
        transform: rotate(-5deg);
      }

      50% {
        transform: rotate(5deg);
      }
    }

    .level-title {
      color: #03e9f4;
      font-size: 36px;
      margin: 30px 0;
      text-align: center;
      font-family: 'KoseFont', Arial, sans-serif;
      text-shadow:
        0 0 5px #03e9f4,
        0 0 25px #03e9f4,
        0 0 50px #03e9f4,
        0 0 100px #03e9f4;
      animation: neonGlow 1.5s ease-in-out infinite alternate;
      position: relative;
      z-index: 2;
    }

    @keyframes neonGlow {
      from {
        text-shadow:
          0 0 5px #03e9f4,
          0 0 25px #03e9f4,
          0 0 50px #03e9f4,
          0 0 100px #03e9f4;
      }

      to {
        text-shadow:
          0 0 2.5px #03e9f4,
          0 0 12.5px #03e9f4,
          0 0 25px #03e9f4,
          0 0 50px #03e9f4;
      }
    }

    .game-container {
      width: 700px;
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      padding: 15px;
      margin: 20px auto;
      background: transparent;
      position: relative;
      z-index: 2;
    }

    .card {
      aspect-ratio: 1;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
      width: 120px;
      height: 120px;
      margin: 0 auto;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      width: 100%;
      height: 100%;
      position: absolute;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .card-front {
      background: #fff;
      transform: rotateY(180deg);
    }

    .card-front img {
      width: 90%;
      height: 90%;
      object-fit: contain;
    }

    .card-back {
      background: url('images/fanpaibeijing.png') no-repeat center center;
      background-size: cover;
    }

    .next-level {
      display: none;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      position: fixed;
      bottom: 30px;
      right: 30px;
      font-size: 20px;
      font-family: 'KoseFont', Arial, sans-serif;
      text-decoration: none;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      transition: all 0.3s ease;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      animation:
        buttonGlow 1.5s ease-in-out infinite alternate,
        gradientMove 3s ease infinite;
      overflow: hidden;
      z-index: 99;
    }

    /* å››è§’è£…é¥° */
    .next-level::before,
    .next-level::after,
    .next-level>span::before,
    .next-level>span::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      border-color: #FFD700;
      border-style: solid;
      pointer-events: none;
      animation: borderGlow 1.5s ease-in-out infinite alternate;
    }

    /* å·¦ä¸Šè§’ */
    .next-level::before {
      top: 0;
      left: 0;
      border-width: 3px 0 0 3px;
      border-radius: 10px 0 0 0;
    }

    /* å³ä¸Šè§’ */
    .next-level::after {
      top: 0;
      right: 0;
      border-width: 3px 3px 0 0;
      border-radius: 0 10px 0 0;
    }

    /* å·¦ä¸‹è§’ */
    .next-level>span::before {
      bottom: 0;
      left: 0;
      border-width: 0 0 3px 3px;
      border-radius: 0 0 0 10px;
    }

    /* å³ä¸‹è§’ */
    .next-level>span::after {
      bottom: 0;
      right: 0;
      border-width: 0 3px 3px 0;
      border-radius: 0 0 10px 0;
    }

    .show-reward-btn {
      display: none;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      position: fixed;
      bottom: 100px;
      right: 30px;
      font-size: 20px;
      font-family: 'KoseFont', Arial, sans-serif;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      animation:
        buttonGlow 1.5s ease-in-out infinite alternate,
        gradientMove 3s ease infinite;
      overflow: hidden;
      z-index: 99;
    }

    .show-reward-btn::before,
    .show-reward-btn::after,
    .show-reward-btn>span::before,
    .show-reward-btn>span::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      border-color: #FFD700;
      border-style: solid;
      pointer-events: none;
      animation: borderGlow 1.5s ease-in-out infinite alternate;
    }

    /* å·¦ä¸Šè§’ */
    .show-reward-btn::before {
      top: 0;
      left: 0;
      border-width: 3px 0 0 3px;
      border-radius: 10px 0 0 0;
    }

    /* å³ä¸Šè§’ */
    .show-reward-btn::after {
      top: 0;
      right: 0;
      border-width: 3px 3px 0 0;
      border-radius: 0 10px 0 0;
    }

    /* å·¦ä¸‹è§’ */
    .show-reward-btn>span::before {
      bottom: 0;
      left: 0;
      border-width: 0 0 3px 3px;
      border-radius: 0 0 0 10px;
    }

    /* å³ä¸‹è§’ */
    .show-reward-btn>span::after {
      bottom: 0;
      right: 0;
      border-width: 0 3px 3px 0;
      border-radius: 0 0 10px 0;
    }

    @keyframes borderGlow {
      from {
        border-color: #FFD700;
        box-shadow: 0 0 5px #FFD700;
      }

      to {
        border-color: #FFA500;
        box-shadow: 0 0 15px #FFA500;
      }
    }

    @keyframes buttonGlow {
      from {
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      }

      to {
        box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
      }
    }

    @keyframes gradientMove {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* è§†é¢‘å¥–åŠ±ç›¸å…³æ ·å¼ */
    .reward-video-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .reward-video-wrapper {
      position: relative;
      width: 95vw;
      height: 95vh;
      background: transparent;
      border-radius: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
    }

    .reward-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 8px;
    }

    /* ä¿®æ”¹å…³é—­æŒ‰é’®çš„æ ·å¼ */
    .close-video {
      position: absolute;
      top: -260px;
      /* æ”¹ä¸ºå›ºå®šè·ç¦»é¡¶éƒ¨ */
      right: 10px;
      /* æ”¹ä¸ºå›ºå®šè·ç¦»å³ä¾§ */
      width: 30px;
      height: 30px;
      background: #FFD700;
      border: none;
      border-radius: 50%;
      color: #FF0000;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'KoseFont', Arial, sans-serif;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      transition: all 0.3s ease;
      z-index: 1001;
    }

    .close-video:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
    }

    .cheat-code-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
    }

    .cheat-code-input {
      width: 200px;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: none;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 16px;
      outline: none;
      border-radius: 0;
      position: relative;
      transition: all 0.3s ease;
    }

    .cheat-code-wrapper {
      position: relative;
      display: inline-block;
    }

    .cheat-code-wrapper::before,
    .cheat-code-wrapper::after,
    .cheat-code-wrapper>span::before,
    .cheat-code-wrapper>span::after {
      content: '';
      position: absolute;
      background: linear-gradient(45deg, #FFD700, #FF0000);
      transition: all 0.3s ease;
    }

    .cheat-success {
      position: fixed;
      top: 70px;
      right: 20px;
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.3s ease;
      text-shadow: 0 0 5px #FFD700;
    }

    .cheat-success.show {
      opacity: 1;
    }

    /* è‡ªå®šä¹‰è§†é¢‘æ§åˆ¶æ¡æ ·å¼ */
    .reward-video::-webkit-media-controls {
      background: linear-gradient(to bottom, rgba(255, 215, 0, 0.2), rgba(255, 0, 0, 0.2));
      border-radius: 0 0 8px 8px;
      padding: 5px;
    }

    .reward-video::-webkit-media-controls-panel {
      display: flex;
      align-items: center;
      padding: 10px;
      background: rgba(139, 0, 0, 0.7);
      border: 2px solid #FFD700;
      border-radius: 8px;
    }

    /* æ’­æ”¾/æš‚åœæŒ‰é’® */
    .reward-video::-webkit-media-controls-play-button {
      background-color: #FFD700;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin: 0 10px;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    /* è¿›åº¦æ¡ */
    .reward-video::-webkit-media-controls-timeline {
      height: 8px;
      background: rgba(255, 215, 0, 0.2);
      border-radius: 4px;
      margin: 0 15px;
    }

    .reward-video::-webkit-media-controls-timeline::-webkit-slider-thumb {
      background: #FFD700;
      border: 2px solid #FF0000;
      border-radius: 50%;
      width: 16px;
      height: 16px;
    }

    /* æ—¶é—´æ˜¾ç¤º */
    .reward-video::-webkit-media-controls-current-time-display,
    .reward-video::-webkit-media-controls-time-remaining-display {
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      margin: 0 5px;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
    }

    /* éŸ³é‡æ§åˆ¶ */
    .reward-video::-webkit-media-controls-volume-slider {
      background: rgba(255, 215, 0, 0.2);
      border-radius: 4px;
      height: 6px;
    }

    .reward-video::-webkit-media-controls-mute-button {
      background-color: #FFD700;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      margin: 0 5px;
    }

    /* è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾å™¨å®¹å™¨ */
    .video-player-container {
      position: relative;
      width: 100%;
      height: 100%;
    }

    /* è‡ªå®šä¹‰æ§åˆ¶æ  */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(139, 0, 0, 0.7);
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      border-radius: 0 0 8px 8px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .video-player-container:hover .custom-controls {
      opacity: 1;
    }

    /* æ’­æ”¾/æš‚åœæŒ‰é’® */
    .play-pause-btn {
      background: #FFD700;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    /* ä¿®æ”¹è¿›åº¦æ¡å®¹å™¨æ ·å¼ */
    .progress-container {
      flex: 1;
      height: 8px;
      background: rgba(255, 215, 0, 0.2);
      border-radius: 4px;
      cursor: pointer;
      position: relative;
    }

    /* ä¿®æ”¹è¿›åº¦æ¡æ ·å¼ï¼Œæ·»åŠ è¿‡æ¸¡æ•ˆæœ */
    .progress-bar {
      height: 100%;
      background: #FFD700;
      border-radius: 4px;
      width: 0%;
      position: relative;
      transition: width 0.1s linear;
      /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
    }

    /* ä¿®æ”¹è¿›åº¦æŒ‡ç¤ºå™¨çš„è¿‡æ¸¡æ•ˆæœ */
    .progress-handle {
      position: absolute;
      right: -30px;
      top: -65px;
      width: 80px;
      height: 80px;
      background-image: url('images/daimao1.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      pointer-events: none;
      transition: all 0.1s linear;
      animation: daimaoFloat 2s ease-in-out infinite;
      transform-origin: bottom center;
    }

    /* æ·»åŠ å‘†çŒ«æµ®åŠ¨åŠ¨ç”» */
    @keyframes daimaoFloat {
      0% {
        transform: translateY(0) rotate(-5deg);
      }

      25% {
        transform: translateY(-15px) rotate(0deg);
      }

      50% {
        transform: translateY(0) rotate(5deg);
      }

      75% {
        transform: translateY(-15px) rotate(0deg);
      }

      100% {
        transform: translateY(0) rotate(-5deg);
      }
    }

    /* å½“é¼ æ ‡æ‚¬åœåœ¨è¿›åº¦æ¡ä¸Šæ—¶ï¼Œç¨å¾®æ”¾å¤§æŒ‡ç¤ºå™¨ */
    .progress-container:hover .progress-handle {
      transform: scale(1.2);
    }

    /* æ—¶é—´æ˜¾ç¤º */
    .time-display {
      color: #FFD700;
      font-family: 'KoseFont', Arial, sans-serif;
      font-size: 14px;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
      min-width: 100px;
      text-align: center;
    }

    /* éŸ³é‡æ§åˆ¶ */
    .volume-container {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .volume-btn {
      background: #FFD700;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .volume-slider {
      width: 80px;
      height: 6px;
      background: rgba(255, 215, 0, 0.2);
      border-radius: 3px;
      cursor: pointer;
    }

    /* æ·»åŠ æ–°çš„æ§åˆ¶æŒ‰é’®æ ·å¼ */
    .control-btn {
      background: #FFD700;
      border: none;
      border-radius: 4px;
      padding: 5px 10px;
      color: #8B0000;
      cursor: pointer;
      font-size: 14px;
      font-family: 'KoseFont', Arial, sans-serif;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: #FFC600;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .control-btn.active {
      background: #FF4500;
      color: #FFD700;
      box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
    }

    /* å€é€Ÿé€‰æ‹©èœå• */
    .speed-menu {
      position: absolute;
      bottom: 100%;
      background: rgba(139, 0, 0, 0.9);
      border-radius: 4px;
      padding: 5px;
      display: none;
    }

    .speed-menu.show {
      display: block;
    }

    .speed-option {
      color: #FFD700;
      padding: 3px 10px;
      cursor: pointer;
      white-space: nowrap;
    }

    .speed-option:hover {
      background: rgba(255, 215, 0, 0.2);
    }

    /* æ·»åŠ tooltipæ ·å¼ */
    .tooltip {
      position: relative;
    }

    .tooltip::after {
      content: attr(data-tooltip) " - " attr(data-status);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 5px 10px;
      background: rgba(139, 0, 0, 0.9);
      color: #FFD700;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s;
      margin-bottom: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      z-index: 1002;
    }

    .tooltip:hover::after {
      visibility: visible;
      opacity: 1;
    }

    /* ä¿®æ”¹è§†é¢‘åˆ‡æ¢æŒ‰é’®æ ·å¼ */
    .video-switch-btn {
      position: absolute;
      top: -300px;
      /* è°ƒæ•´åˆ°é€€å‡ºæŒ‰é’®ä¸‹æ–¹ */
      right: -770px;
      /* ä¸é€€å‡ºæŒ‰é’®å¯¹é½ */
      transform: none;
      /* ç§»é™¤å‚ç›´å±…ä¸­ */
      text-decoration: none;
      line-height: 1;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 400px;
      height: 70px;
      background: linear-gradient(90deg, #8B0000, #FFD700);
      border-radius: 8px;
      font-size: 16px;
      color: #ffffff;
      overflow: hidden;
      position: relative;
      border: none;
      cursor: pointer;
      z-index: 1000;
    }

    .video-switch-btn span.icon,
    .video-switch-btn span.txt {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 100;
      right: -100;
      color: white;
      transition: all 0.5s ease;
      z-index: 2;
      backface-visibility: hidden;
    }

    .video-switch-btn span.txt {
      transform: rotateY(0deg);
      font-family: 'KoseFont', Arial, sans-serif;
      color: #03e9f4;
      font-size: 20px;
      text-shadow: 0 0 5px #03e9f4;
    }

    .video-switch-btn span.icon {
      transform: rotateY(-180deg);
    }

    .video-switch-btn span.icon svg {
      width: 40px;
      fill: #03e9f4;
      filter: drop-shadow(0 0 5px #03e9f4);
    }

    .video-switch-btn:hover span.txt {
      transform: rotateY(-180deg);
    }

    .video-switch-btn:hover span.icon {
      transform: rotateY(0deg);
    }

    /* è§†é¢‘å®¹å™¨æ·»åŠ ç›¸å¯¹å®šä½ */
    .video-player-container {
      position: relative;
    }

    /* æ·»åŠ è™«æ£å‘†çŒ«å›¾ç‰‡æ ·å¼å’ŒåŠ¨ç”» */
    .chonggundaimao {
      position: absolute;
      top: 40px;
      right: 100px;
      width: 300px;
      height: auto;
      z-index: 1001;
      animation: floatAndRotate 3s ease-in-out infinite;
      transform-origin: center center;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    /* æ‚¬æµ®æ•ˆæœ */
    .chonggundaimao:hover {
      transform: scale(1.1) rotate(5deg);
      filter: brightness(1.2);
    }

    /* å®šä¹‰æµ®åŠ¨æ—‹è½¬åŠ¨ç”» */
    @keyframes floatAndRotate {
      0% {
        transform: translateY(0) rotate(0deg);
      }

      25% {
        transform: translateY(-10px) rotate(3deg);
      }

      50% {
        transform: translateY(0) rotate(0deg);
      }

      75% {
        transform: translateY(10px) rotate(-3deg);
      }

      100% {
        transform: translateY(0) rotate(0deg);
      }
    }

    /* æ·»åŠ è¿”å›æŒ‰é’®æ ·å¼ */
    .back-btn {
      position: fixed;
      left: 20px;
      bottom: 20px;
      padding: 15px 30px;
      background: linear-gradient(45deg, #FFD700, #FF0000, #FFD700);
      background-size: 200% 200%;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'KoseFont', Arial, sans-serif;
      text-decoration: none;
      animation: gradientMove 3s linear infinite;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
      z-index: 1000;
    }

    .back-btn:hover {
      animation: buttonGlow 1s ease-in-out infinite alternate;
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <!-- æ·»åŠ æ˜¥èŠ‚è£…é¥°å…ƒç´  -->
  <div class="fu fu-left">ç¦</div>
  <div class="fu fu-right">ç¦</div>
  <div class="lantern lantern-left"></div>
  <div class="lantern lantern-right"></div>
  <div class="couplet couplet-left">æ–°æ˜¥å¿«ä¹å‘†çŒ«é™ª</div>
  <div class="couplet couplet-right">ç‘é›ªä¸°å¹´ç¦æ°”æ¥</div>

  <!-- ä¿®æ”¹ä½œå¼Šç è¾“å…¥æ¡†ç»“æ„ -->
  <div class="cheat-code-container">
    <div class="cheat-code-wrapper">
      <span></span>
      <input type="text" class="cheat-code-input" id="cheatCodeInput" placeholder="ä½œå¼Šç ï¼štiaoguo3">
    </div>
    <div class="cheat-success" id="cheatSuccess">å¯†ä»¤ç”Ÿæ•ˆï¼</div>
  </div>
  <h1 class="level-title">ç¬¬ä¸‰å…³ - å‘†çŒ«ç¿»è½¬é«˜æ‰‹</h1>
  <div class="game-container" id="gameContainer"></div>
  <a href="fanpai-level4.html" class="next-level" id="nextLevel">
    <span></span>
    ä¸‹ä¸€å…³
  </a>

  <!-- ä¿®æ”¹è§†é¢‘æ’­æ”¾å™¨ç»“æ„ -->
  <div class="reward-video-container" id="rewardVideoContainer">
    <div class="reward-video-wrapper">
      <div class="video-player-container">
        <video class="reward-video" id="rewardVideo">
          <source src="videos/fanzhuanjiangli3-1.mp4" type="video/mp4" id="videoSource">
          ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
        </video>
        <button class="video-switch-btn" id="switchVideoBtn">
          <span class="txt">å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äºŒä¸ªå¥–åŠ±è§†é¢‘å–µ</span>
          <span class="icon">
            <svg t="1691995071208" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="2968" width="200" height="200">
              <path
                d="M729.6 448H128v85.333333h601.6L597.333333 665.6l59.733334 59.733333 234.666666-234.666666L661.333333 256l-59.733333 59.733333 128 132.266667z"
                p-id="2969"></path>
            </svg>
          </span>
        </button>
        <div class="custom-controls">
          <button class="play-pause-btn tooltip" id="playPauseBtn" data-tooltip="æ’­æ”¾/æš‚åœ">â–¶</button>
          <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar">
              <div class="progress-handle"></div>
            </div>
          </div>
          <div class="time-display">
            <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
          </div>

          <!-- æ–°å¢çš„æ§åˆ¶æŒ‰é’® -->
          <div class="speed-control" style="position: relative;">
            <button class="control-btn tooltip" id="speedBtn" data-tooltip="æ’­æ”¾é€Ÿåº¦">1.0x</button>
            <div class="speed-menu" id="speedMenu">
              <div class="speed-option" data-speed="0.5">0.5x</div>
              <div class="speed-option" data-speed="1.0">1.0x</div>
              <div class="speed-option" data-speed="1.5">1.5x</div>
              <div class="speed-option" data-speed="2.0">2.0x</div>
            </div>
          </div>
          <button class="control-btn tooltip" id="loopBtn" data-tooltip="å¾ªç¯æ’­æ”¾">ğŸ”</button>
          <button class="control-btn tooltip" id="downloadBtn" data-tooltip="ä¸‹è½½è§†é¢‘">ğŸ’¾</button>

          <div class="volume-container">
            <button class="volume-btn tooltip" id="volumeBtn" data-tooltip="é™éŸ³/å–æ¶ˆé™éŸ³">ğŸ”Š</button>
            <input type="range" class="volume-slider tooltip" id="volumeSlider" min="0" max="1" step="0.1" value="1"
              data-tooltip="éŸ³é‡è°ƒèŠ‚">
          </div>
        </div>
        <img src="images/chonggundaimao2.png" alt="è™«æ£å‘†çŒ«" class="chonggundaimao">
      </div>
      <button class="close-video tooltip" id="closeVideo" data-tooltip="å…³é—­è§†é¢‘">Ã—</button>
    </div>
  </div>

  <!-- æ·»åŠ æ˜¾ç¤ºå¥–åŠ±æŒ‰é’® -->
  <button class="show-reward-btn" id="showRewardBtn">
    <span></span>
    æ¥è‡ªå‘†çŒ«çš„å¥–åŠ±å°è§†é¢‘
  </button>

  <!-- æ·»åŠ è¿”å›æŒ‰é’® -->
  <a href="fanpai-level2.html" class="back-btn">è¿”å›ä¸Šä¸€å…³</a>

  <script>
    // ç¬¬ä¸‰å…³ä½¿ç”¨çš„å›¾ç‰‡ï¼ˆ10å¼ ï¼Œæ¯å¼ å‡ºç°ä¸¤æ¬¡ï¼‰
    const images = [
      'images/chonggundaimao.png',
      'images/taidaodaimao.png',
      'images/dajiandaimao.png',
      'images/shuangdaodaimao.png',
      'images/dunfudaimao.png',
      'images/zhongnudaimao.png',
      'images/zhanfudaimao.png',
      'images/dachuidaimao.png',
      'images/pianshoujiandaimao.png',
      'images/gongjiandaimao.png'
    ];

    let cards = [...images, ...images]; // å¤åˆ¶ä¸€ä»½ï¼Œå½¢æˆå¯¹å­
    let flippedCards = [];
    let matchedPairs = 0;

    // æ´—ç‰Œå‡½æ•°
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // åˆ›å»ºå¡ç‰‡
    function createCards() {
      const gameContainer = document.getElementById('gameContainer');
      shuffle(cards).forEach((image, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.image = image;

        const front = document.createElement('div');
        front.className = 'card-front';
        const img = document.createElement('img');
        img.src = image;
        front.appendChild(img);

        const back = document.createElement('div');
        back.className = 'card-back';

        card.appendChild(front);
        card.appendChild(back);

        card.addEventListener('click', flipCard);
        gameContainer.appendChild(card);
      });
    }

    // ç¿»ç‰Œå‡½æ•°
    function flipCard() {
      if (flippedCards.length === 2) return;
      if (this.classList.contains('flipped')) return;

      this.classList.add('flipped');
      flippedCards.push(this);

      if (flippedCards.length === 2) {
        checkMatch();
      }
    }

    // æ£€æŸ¥é…å¯¹
    function checkMatch() {
      const [card1, card2] = flippedCards;
      const match = card1.dataset.image === card2.dataset.image;

      if (match) {
        matchedPairs++;
        flippedCards = [];

        // æ£€æŸ¥æ˜¯å¦å®Œæˆæœ¬å…³
        if (matchedPairs === images.length) {
          setTimeout(() => {
            document.getElementById('nextLevel').style.display = 'block';
            showRewardVideo(); // æ˜¾ç¤ºå¥–åŠ±è§†é¢‘
          }, 500);
        }
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          flippedCards = [];
        }, 1000);
      }
    }

    // è§†é¢‘ç›¸å…³åŠŸèƒ½
    const videoContainer = document.getElementById('rewardVideoContainer');
    const video = document.getElementById('rewardVideo');
    const closeBtn = document.getElementById('closeVideo');
    const showRewardBtn = document.getElementById('showRewardBtn');

    function showRewardVideo() {
      const rewardVideoContainer = document.getElementById('rewardVideoContainer');
      const backBtn = document.querySelector('.back-btn'); // è·å–è¿”å›æŒ‰é’®

      rewardVideoContainer.style.display = 'flex';
      backBtn.style.display = 'none'; // éšè—è¿”å›æŒ‰é’®

      // æ’­æ”¾è§†é¢‘
      const video = document.getElementById('rewardVideo');
      video.play().catch(error => {
        console.log("è§†é¢‘è‡ªåŠ¨æ’­æ”¾å¤±è´¥:", error);
      });
    }

    // å…³é—­è§†é¢‘æ—¶æ˜¾ç¤ºè¿”å›æŒ‰é’®
    document.querySelector('.close-video').addEventListener('click', () => {
      const rewardVideoContainer = document.getElementById('rewardVideoContainer');
      const backBtn = document.querySelector('.back-btn'); // è·å–è¿”å›æŒ‰é’®

      rewardVideoContainer.style.display = 'none';
      backBtn.style.display = 'block'; // æ˜¾ç¤ºè¿”å›æŒ‰é’®

      // æš‚åœè§†é¢‘
      const video = document.getElementById('rewardVideo');
      video.pause();
    });

    // ä¿®æ”¹ä½œå¼Šç éªŒè¯é€»è¾‘
    const cheatCodeInput = document.getElementById('cheatCodeInput');
    const cheatSuccess = document.getElementById('cheatSuccess');
    const validCheatCodes = {
      'tiaoguo1': 1,
      'tiaoguo2': 2,
      'tiaoguo3': 3,
      'tiaoguo4': 4
    };

    cheatCodeInput.addEventListener('input', function () {
      const code = this.value.trim().toLowerCase();
      if (validCheatCodes[code]) {
        if (validCheatCodes[code] === 3) {
          matchedPairs = images.length;
          document.getElementById('nextLevel').style.display = 'block';
          showRewardVideo();
          this.value = '';

          cheatSuccess.classList.add('show');
          setTimeout(() => {
            cheatSuccess.classList.remove('show');
          }, 2000);
        } else {
          this.value = '';
          cheatSuccess.textContent = 'æ­¤å¯†ä»¤ç”¨äºå…¶ä»–å…³å¡ï¼';
          cheatSuccess.classList.add('show');
          setTimeout(() => {
            cheatSuccess.classList.remove('show');
            cheatSuccess.textContent = 'å¯†ä»¤ç”Ÿæ•ˆï¼';
          }, 2000);
        }
      }
    });

    // è§†é¢‘æ’­æ”¾å™¨æ§åˆ¶
    const playPauseBtn = document.getElementById('playPauseBtn');
    const progressContainer = document.getElementById('progressContainer');
    const progressBar = document.getElementById('progressBar');
    const currentTimeSpan = document.getElementById('currentTime');
    const durationSpan = document.getElementById('duration');
    const volumeBtn = document.getElementById('volumeBtn');
    const volumeSlider = document.getElementById('volumeSlider');

    // ä¿®å¤æ’­æ”¾/æš‚åœæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†
    playPauseBtn.addEventListener('click', () => {
      if (video.paused || video.ended) {
        video.play()
          .then(() => {
            playPauseBtn.textContent = 'â¸';
          })
          .catch(error => {
            console.log("è§†é¢‘æ’­æ”¾å¤±è´¥:", error);
          });
      } else {
        video.pause();
        playPauseBtn.textContent = 'â–¶';
      }
    });

    // ç¡®ä¿è§†é¢‘çŠ¶æ€æ”¹å˜æ—¶æ›´æ–°æŒ‰é’®æ˜¾ç¤º
    video.addEventListener('play', () => {
      playPauseBtn.textContent = 'â¸';
    });

    video.addEventListener('pause', () => {
      playPauseBtn.textContent = 'â–¶';
    });

    video.addEventListener('ended', () => {
      playPauseBtn.textContent = 'â–¶';
    });

    // è§†é¢‘åŠ è½½å®Œæˆåè®¾ç½®åˆå§‹çŠ¶æ€
    video.addEventListener('loadedmetadata', () => {
      durationSpan.textContent = formatTime(video.duration);
      if (video.paused) {
        playPauseBtn.textContent = 'â–¶';
      } else {
        playPauseBtn.textContent = 'â¸';
      }
    });

    // ä¼˜åŒ–è¿›åº¦æ¡æ›´æ–°é€»è¾‘
    video.addEventListener('timeupdate', () => {
      requestAnimationFrame(() => {
        const progress = (video.currentTime / video.duration) * 100;
        progressBar.style.width = `${progress}%`;
        currentTimeSpan.textContent = formatTime(video.currentTime);
      });
    });

    // ä¼˜åŒ–è¿›åº¦æ¡ç‚¹å‡»é€»è¾‘
    progressContainer.addEventListener('click', (e) => {
      const rect = progressContainer.getBoundingClientRect();
      const pos = (e.clientX - rect.left) / rect.width;
      video.currentTime = pos * video.duration;
    });

    // æ·»åŠ è¿›åº¦æ¡æ‹–åŠ¨åŠŸèƒ½
    let isDragging = false;

    progressContainer.addEventListener('mousedown', () => {
      isDragging = true;
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        const rect = progressContainer.getBoundingClientRect();
        const pos = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        video.currentTime = pos * video.duration;
      }
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
    });

    // éŸ³é‡æ§åˆ¶
    volumeSlider.addEventListener('input', () => {
      video.volume = volumeSlider.value;
      updateVolumeIcon();
    });

    volumeBtn.addEventListener('click', () => {
      video.muted = !video.muted;
      updateVolumeIcon();
    });

    // æ›´æ–°éŸ³é‡å›¾æ ‡
    function updateVolumeIcon() {
      if (video.muted || video.volume === 0) {
        volumeBtn.textContent = 'ğŸ”‡';
      } else if (video.volume < 0.5) {
        volumeBtn.textContent = 'ğŸ”‰';
      } else {
        volumeBtn.textContent = 'ğŸ”Š';
      }
    }

    // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      seconds = Math.floor(seconds % 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    // è·å–æ–°æ·»åŠ çš„æ§åˆ¶æŒ‰é’®
    const speedBtn = document.getElementById('speedBtn');
    const speedMenu = document.getElementById('speedMenu');
    const loopBtn = document.getElementById('loopBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    // å€é€Ÿæ§åˆ¶
    speedBtn.addEventListener('click', () => {
      speedMenu.classList.toggle('show');
    });

    // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­å€é€Ÿèœå•
    document.addEventListener('click', (e) => {
      if (!speedBtn.contains(e.target) && !speedMenu.contains(e.target)) {
        speedMenu.classList.remove('show');
      }
    });

    // é€‰æ‹©å€é€Ÿ
    document.querySelectorAll('.speed-option').forEach(option => {
      option.addEventListener('click', () => {
        const speed = parseFloat(option.dataset.speed);
        video.playbackRate = speed;
        speedBtn.textContent = speed + 'x';
        speedMenu.classList.remove('show');
      });
    });

    // è®¾ç½®é»˜è®¤å¾ªç¯æ’­æ”¾
    video.loop = true;
    loopBtn.classList.add('active');
    loopBtn.setAttribute('data-tooltip', 'å¾ªç¯æ’­æ”¾');
    loopBtn.setAttribute('data-status', 'å·²å¯ç”¨');

    // ä¿®æ”¹å¾ªç¯æ’­æ”¾æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
    loopBtn.addEventListener('click', () => {
      video.loop = !video.loop;
      loopBtn.classList.toggle('active');

      // æ›´æ–°çŠ¶æ€æç¤ºæ–‡å­—
      if (video.loop) {
        loopBtn.setAttribute('data-status', 'å·²å¯ç”¨');
      } else {
        loopBtn.setAttribute('data-status', 'å·²å…³é—­');
      }
    });

    // è§†é¢‘åŠ è½½å®Œæˆåç¡®ä¿å¾ªç¯æ’­æ”¾çŠ¶æ€æ­£ç¡®
    video.addEventListener('loadedmetadata', () => {
      // ... existing loadedmetadata code ...

      // ç¡®ä¿å¾ªç¯æ’­æ”¾å¯ç”¨
      video.loop = true;
      loopBtn.classList.add('active');
      loopBtn.setAttribute('data-status', 'å·²å¯ç”¨');
    });

    // ä¸‹è½½è§†é¢‘
    downloadBtn.addEventListener('click', () => {
      const videoUrl = video.querySelector('source').src;
      const a = document.createElement('a');
      a.href = videoUrl;
      a.download = 'video.mp4';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    });

    // é”®ç›˜å¿«æ·é”®æ§åˆ¶
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        // ç©ºæ ¼é”®æ’­æ”¾/æš‚åœ
        e.preventDefault();
        if (video.paused) {
          video.play();
          playPauseBtn.textContent = 'â¸';
        } else {
          video.pause();
          playPauseBtn.textContent = 'â–¶';
        }
      } else if (e.code === 'ArrowLeft') {
        // å·¦ç®­å¤´å¿«é€€5ç§’
        video.currentTime = Math.max(video.currentTime - 5, 0);
      } else if (e.code === 'ArrowRight') {
        // å³ç®­å¤´å¿«è¿›5ç§’
        video.currentTime = Math.min(video.currentTime + 5, video.duration);
      }
    });

    // æ·»åŠ è§†é¢‘åˆ‡æ¢åŠŸèƒ½
    const switchVideoBtn = document.getElementById('switchVideoBtn');
    const videoSource = document.getElementById('videoSource');
    let currentVideo = 1;
    const switchBtnText = switchVideoBtn.querySelector('.txt');

    switchVideoBtn.addEventListener('click', () => {
      const wasPlaying = !video.paused;
      currentVideo = currentVideo % 5 + 1; // 1->2->3->4->5->1
      videoSource.src = `videos/fanzhuanjiangli3-${currentVideo}.mp4`;

      switch (currentVideo) {
        case 1:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äºŒä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 2:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬ä¸‰ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 3:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬å››ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 4:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äº”ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
        case 5:
          switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥è¿”å›è¯¥å…³å¡çš„ç¬¬ä¸€ä¸ªå¥–åŠ±è§†é¢‘å–µ';
          break;
      }

      video.load();
      video.addEventListener('loadedmetadata', function onLoaded() {
        if (wasPlaying) {
          video.play()
            .then(() => {
              playPauseBtn.textContent = 'â¸';
            })
            .catch(error => {
              console.log("è§†é¢‘æ’­æ”¾å¤±è´¥:", error);
            });
        }
        video.removeEventListener('loadedmetadata', onLoaded);
      });
    });

    // åˆå§‹åŒ–æŒ‰é’®æ–‡å­—
    switchBtnText.textContent = 'å‘†çŒ«æé†’ï¼šç‚¹è¿™é‡Œå¯ä»¥çœ‹è§è¯¥å…³å¡çš„ç¬¬äºŒä¸ªå¥–åŠ±è§†é¢‘å–µ';

    // åˆå§‹åŒ–æ¸¸æˆ
    createCards();
  </script>
</body>

</html>